# Лабораторная работа №9
# Работа с временным рядом

**Данные: цены на момент закрытия на акции компании NSRGY с 2002-01-01**  

![image](https://user-images.githubusercontent.com/93386717/232344278-f39eaa83-9b54-400b-89d3-4051751c8a9c.png)  
По графику видно, что стоило вкладыватся в акции компании.
Также ясно, что ряд не стационарен. В нём можно выразить трендовую зависимость.  

**Тест Дикки-Фуллера на стационарность**
Проверим на уровне значимости 0.05  
p-value = 0.9927. Ряд не стационарен  

**ACF**  
![image](https://user-images.githubusercontent.com/93386717/232344330-3167e8ec-f8ec-474b-8bb4-278165914ccc.png)

**PACF**  
![image](https://user-images.githubusercontent.com/93386717/232344349-342d1746-7a5c-490b-a1b9-e63734d0f334.png)  

Оптимальные значения парамтеров d,q - определить сложно. Однако, p, скорее всего, будет равно 2.  

Перебирая значения p,d,q для ARIMA -модели в течении 4 минут  
p = [0,2]  
d = [0,2]  
q = [0,14]  

Таким образом на исзодных данных можно построить модель ARIMA(2,1,14). Даёт лучшие результаты MAE=0.80356880668188  

MAPE(test) = 2.56059  

**Прогноз на 10 наблюдений**  
![image](https://user-images.githubusercontent.com/93386717/232345404-009b1777-aa86-48af-9920-f07a04805980.png)  
Судя по графику, в дальнейшем цены на акции этой компании продолжат возрастать, а потом начнут снижаться

**Доп задание**

Требуется разделить исходные данные на 3 блока  
Предлагается взять такие интервалы:  

Начало - середина 2008-2009 (примерный локальный максимум)  
середина 2008-2009 - 2017  
2017 - конец  

Best model on 1 block: (4, 0, 8) mae на train: 0.307825728785068 mae на test: 0.7709350429161534  
Best model on 2 block: (4, 0, 9) mae на train: 0.8355575981834499 mae на test: 1.015991705872466    
Best model on 3 block: (3, 0, 5) mae на train: 1.57175792106171 mae на test: 2.2105176056885942

Лучшей моделью можно считать номер 1.  
Данные взятые на 1 выборке наиболее приближены к стационарным  
