# Лабораторная работа №7: Исследование факторов и организация работы с таблицами данных

*Данные*: data_purch.xlsx

## Группировка данных

Были взяты данные изначальные факторы и сгруппированы по `purchase_number`:

Группировка и исследование необходимых переменных

 - first_pub_date: дата публикации процедуры  
 - final_protocol_pub_date: дата завершения процедуры  
 - drug_mnn_ext_code: идентификатор лекарственного препарата  
 - cust_reg: регион заказчика процедуры  
 - placing_base_name: форма проведения торгов  
 - is_abnd: фиктивная переменная: 1 – закупка не состоялась, 0 – состоялась  
 - collecting_start_date: дата начала сбора заявок от потенциальных  
 - collecting_end_date: дата окончания сбора заявок от потенциальных поставщиков  
 - app_amount_absolute_correct: сумма залога  

## Формирование новых факторов

- Преобразование категориальной переменной `placing_base_name` и `cust_reg` с помощью библиотеки `sklearn` `OrdinalEncoder`  
- Метод главных компонент  
- Факторный анализ  
- `amount_drug` описывает отношение суммы залога к кол-ву препаратов  
- 
## Оценка важности факторов на основе метода "Дерево решений" 

Проведём разделение на обучающую и тестовую выборку и применим метод "Дерево решений"  
![image](https://user-images.githubusercontent.com/93386717/231023484-21915089-0491-41e1-84b4-9d481bb261bf.png)    
Получим 5 важных факторов: ['procedure_time', 'collect_time', 'cust_reg_code', 'amount_drug', 'FA']  
5 наиболее важным фактором является FA, однако он включает в себя первые два, поэтому его следует заменить на placing_base_name_code

## Построение логистической регрессии

После оценки важности оставляем только 5 наиболее важных факторов на нашей обучающей и тестовой выборке.

Точность модели на обучающей выборке: **0.8953973168214654**  
Точность модели на тестовой выборке: **0.8945098039215686**  

Точность порядка 90% это хороший результат поэтому можно говорить что модель можно использовать для предсказания
